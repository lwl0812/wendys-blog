---
_title: 三、HTTP 报文内的 HTTP 信息
description: HTTP
sidebar: auto
displayAllHeaders: true
tag: HTTP
public: false
---

# 三、HTTP 报文内的 HTTP 信息

HTTP 报文：用于 HTTP 协议交互的信息。

可分为：报文首部和报文主体。

## 3.2 请求报文和响应报文的结构

请求报文和响应报文的首部内容：

内容  |  描述 
------ |----
请求行 | 包含请求方法、请求URI、HTTP版本
状态 | 包含表明响应结果的状态码、原因短语、HTTP版本
首部字段 | 包含表明请求和响应的各种条件和属性的各类首部，通用首部、请求首部、响应首部、实体首部
其他 | 可能包含 HTTP 的 RFC 里未规定的首部，如 Cookie

## 3.3 编码提升传输速率

### 3.3.1 报文主体和实体主体的差异

报文（message）：HTTP 通信的基本单位，由 8 位字节流组成，通过 HTTP 通信传输。

实体（entity）：作为请求和响应的有效荷载数据被传输，由实体首部和实体主体组成。

HTTP 的报文主体用于传输请求或响应的实体主体。

通常，报文主体等于实体主体，只有当传输中进行编码操作时，实体主体的内容发生变化，才导致和报文主体产生差异。

### 3.3.2 压缩传输的内容编码

HTTP 协议中有一种叫内容编码的功能。

内容编码指明在实体内容上应用的编码格式，并保持实体内容原样压缩，客户端接受到后，将内容解码。

内容编码：

- gzip（GNU zip）
- compress
- deflate（zlib）
- identity（不进行编码）

### 3.3.3 分割发送的分块传输编码

把数据分割成多块，能让浏览器逐步显示。

这种把实体主体分块的功能叫作分块传输编码（Chunk Transfer Coding）。

在邮件中写入文字并能上传多份附件是因为采用了 MIME（Multiplepurpose Internet Mail Extensions） 机制。

它允许邮件处理多个不同类型的数据。

分块传输会将实体主体分成多个部分（每个部分叫作 chunk），每个 chunk 都会用十六进制标记大小，最后一块用 ```0(CR+LF)``` 来标记。

### 3.3.4 发送多种数据的多部分对象集合

MIME 扩展中会使用一种多部分对象集合（Multipart）的方法，来容纳多份不同类型的数据。

HTTP 协议中也采用了多部分对象集合，发送的一份报文主体内可包含多种类型实体。

多部分对象集合包含的对象：

- multipart/form-data
- multipart/byteranges

在 HTTP 报文中使用多部分对象集合时，需加上首部字段 Content-type。

boundary 字符串：划分多部分对象集合指明的各类实体。




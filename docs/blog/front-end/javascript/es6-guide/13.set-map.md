---
_title: Set 和 Map 数据结构
description: ES6
sidebar: auto
displayAllHeaders: true
tag: JavaScript
public: false
---

# Set 和 Map 数据结构

## Set

Set 本身是一个构造函数，用来生成 Set 数据结构。

Set 函数可以接受一个数组（或具有 iterator 接口的其他数据结构）作为参数，来初始化。

```js
const set = new Set([1, 2, 3, 4, 5, 5, 4, 3, 2, 1]);
console.log(set); // Set(5) {1, 2, 3, 4, 5}
```

## Set 实例的属性和方法

属性：

- Set.prototype.constructor
- Set.prototype.size

方法：

- Set.prototype.add()
- Set.prototype.delete()
- Set.prototype.has()
- Set.prototype.clear()

## 遍历操作

- keys()
- values()
- entries()
- forEach()

## WeakSet

- WeakSet 的成员只能是对象

```js
const weakSet = new WeakSet();
weakSet.add(1); // Uncaught TypeError: Invalid value used in weak set
```

- WeakSet 中的对象都是弱引用

方法：

- add()
- delete()
- has()

用处：存放 DOM 节点，不用担心节点从文档移除时，会导致内存泄漏。

## Map

Map 数据结构类似于对象，但是键不限于字符串，任何类型的值都可以。

Map 可以接受数组作为参数。

```js
const arr = [['name', 'luwl'], ['age', 18]];
const map = new Map(arr);
console.log(map.has('name')); // true
console.log(map.get('name')); // 'luwl'
console.log(map.has('age')); // true
console.log(map.get('age')); // 18
map.delete('age');
console.log(map.has('age')); // false
```

以数组作为参数执行的是下面的方法：

```js
const arr = [['name', 'luwl'], ['age', 18]];
const map = new Map();
arr.forEach(([key, val]) => {
  map.set(key, val);
});
```

任何具有 iterator 接口的数据都可以作为 Map 的参数。

对同一键值进行重复赋值，后面的会覆盖前面的。

```js
const map = new Map();
map.set('age', 18);
map.set('age', 19);
console.log(map.get('age')); // 19
```

只有对同一个对象的引用，Map 结构才将其视为同一个键值。

## 实例的属性和操作方法

- size
- set(key, value)
- get(key)
- has(key)
- delete(key)
- clear()


